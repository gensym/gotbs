<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>Canvas time</title>
    <link rel="stylesheet" href="css/style.css?v=1">
  </head>
  
  <body>
    
    <div id="main">
      Here is stuff
      <input id="message" type="text"/>
      <section id="content"></section>
    </div>
    

    <div id="page-specific-scripts">
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
      <script src="http://jquery-json.googlecode.com/files/jquery.json-2.2.min.js"></script>
      <script src="http://jquery-websocket.googlecode.com/files/jquery.websocket-0.0.1.js"></script>
      <script>
        $(document).ready(function() {
          var ws = $.websocket("ws://127.0.0.1:8888/topics", {
            events: { 
              broadcasted: function(e) { $("#content").html(e.message); }}});

          $('#message').change(function(){
            ws.send('subscribe', {topic: $("#message").val()});});
        });
      </script>
    </div>

  </body> 
</html>
